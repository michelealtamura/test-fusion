<div class="home-container">
  <div class="anomalie-card">
    <div class="card-content">
      <!-- Header with title and tabs -->
      <div class="header-section">
        <h1 class="title">Anomalie</h1>
        <div class="tab-container">
          <div class="tab-background">
            <button 
              class="tab-button" 
              [class.active]="activeTab === 'Attive'"
              (click)="setActiveTab('Attive')">
              <svg class="tab-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M15.8254 15.8334H15.8333M15.8254 15.8334C15.3065 16.348 14.3661 16.2198 13.7066 16.2198C12.8971 16.2198 12.5072 16.3782 11.9295 16.9559C11.4376 17.4479 10.7781 18.3334 9.99999 18.3334C9.22191 18.3334 8.56241 17.4479 8.07047 16.9559C7.49272 16.3782 7.1029 16.2198 6.29337 16.2198C5.63389 16.2198 4.69347 16.348 4.17456 15.8334C3.6515 15.3147 3.78022 14.3704 3.78022 13.7067C3.78022 12.8679 3.59679 12.4822 2.99947 11.8849C2.11094 10.9964 1.66667 10.5521 1.66666 10.0001C1.66666 9.448 2.11092 9.00375 2.99945 8.11522C3.53266 7.58201 3.78022 7.05365 3.78022 6.29347C3.78022 5.63396 3.65206 4.69353 4.16666 4.17461C4.68535 3.65156 5.62966 3.7803 6.29339 3.7803C7.05355 3.7803 7.58192 3.53275 8.11511 2.99956C9.00366 2.11101 9.44791 1.66675 9.99999 1.66675C10.5521 1.66675 10.9963 2.11101 11.8848 2.99956C12.4179 3.53264 12.9462 3.7803 13.7066 3.7803C14.3661 3.7803 15.3066 3.65214 15.8255 4.16675C16.3485 4.68544 16.2197 5.62974 16.2197 6.29347C16.2197 7.13223 16.4032 7.51789 17.0005 8.11522C17.8891 9.00375 18.3333 9.448 18.3333 10.0001C18.3333 10.5521 17.8891 10.9964 17.0005 11.8849C16.4032 12.4822 16.2197 12.8679 16.2197 13.7067C16.2197 14.3704 16.3485 15.3147 15.8254 15.8334Z" stroke="currentColor" stroke-width="1.25"/>
                <path d="M12.5 7.5L7.5 12.5M7.5 7.5L12.5 12.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Attive
            </button>
            <button 
              class="tab-button" 
              [class.active]="activeTab === 'Dismesse'"
              (click)="setActiveTab('Dismesse')">
              <svg class="tab-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M15.8254 15.8334H15.8333M15.8254 15.8334C15.3065 16.348 14.3661 16.2198 13.7066 16.2198C12.8971 16.2198 12.5072 16.3782 11.9295 16.9559C11.4376 17.4479 10.7781 18.3334 9.99999 18.3334C9.22191 18.3334 8.56241 17.4479 8.07047 16.9559C7.49272 16.3782 7.1029 16.2198 6.29337 16.2198C5.63389 16.2198 4.69347 16.348 4.17456 15.8334C3.6515 15.3147 3.78022 14.3704 3.78022 13.7067C3.78022 12.8679 3.59679 12.4822 2.99947 11.8849C2.11094 10.9964 1.66667 10.5521 1.66666 10.0001C1.66666 9.448 2.11092 9.00375 2.99945 8.11522C3.53266 7.58201 3.78022 7.05365 3.78022 6.29347C3.78022 5.63396 3.65206 4.69353 4.16666 4.17461C4.68535 3.65156 5.62966 3.7803 6.29339 3.7803C7.05355 3.7803 7.58192 3.53275 8.11511 2.99956C9.00366 2.11101 9.44791 1.66675 9.99999 1.66675C10.5521 1.66675 10.9963 2.11101 11.8848 2.99956C12.4179 3.53264 12.9462 3.7803 13.7066 3.7803C14.3661 3.7803 15.3066 3.65214 15.8255 4.16675C16.3485 4.68544 16.2197 5.62974 16.2197 6.29347C16.2197 7.13223 16.4032 7.51789 17.0005 8.11522C17.8891 9.00375 18.3333 9.448 18.3333 10.0001C18.3333 10.5521 17.8891 10.9964 17.0005 11.8849C16.4032 12.4822 16.2197 12.8679 16.2197 13.7067C16.2197 14.3704 16.3485 15.3147 15.8254 15.8334Z" stroke="currentColor" stroke-width="1.25"/>
                <path d="M7.5 10.7442L9 12.0834L12.5 7.91675" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Dismesse
            </button>
          </div>
        </div>
      </div>

      <!-- Search and filters -->
      <div class="search-filters-section">
        <div class="search-container">
          <div class="search-input-container">
            <svg class="search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none">
              <path d="M10.2083 10.2083L12.8333 12.8333" stroke="currentColor" stroke-width="0.9" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M11.6667 6.41675C11.6667 3.51725 9.31619 1.16675 6.41667 1.16675C3.51718 1.16675 1.16667 3.51725 1.16667 6.41675C1.16667 9.31626 3.51718 11.6667 6.41667 11.6667C9.31619 11.6667 11.6667 9.31626 11.6667 6.41675Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
            </svg>
            <input 
              type="text" 
              placeholder="Ricerca..." 
              [value]="searchTerm"
              (input)="onSearch($event)"
              class="search-input">
          </div>
        </div>
        <div class="filters-container">
          <button class="filter-button" title="Filtri">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M5.90497 8.3374C4.24601 7.09707 3.06376 5.73277 2.41823 4.96578C2.2184 4.72835 2.15292 4.5546 2.11355 4.24853C1.97874 3.20053 1.91134 2.67653 2.21863 2.33827C2.52593 2 3.06936 2 4.15622 2H11.8438C12.9307 2 13.4741 2 13.7813 2.33827C14.0887 2.67653 14.0213 3.20053 13.8865 4.24854C13.8471 4.55461 13.7816 4.72836 13.5817 4.96578C12.9353 5.73375 11.7507 7.10047 10.0884 8.34233C9.938 8.45473 9.83887 8.6378 9.82047 8.84093C9.6558 10.6613 9.50393 11.6584 9.4094 12.1628C9.25687 12.9771 8.10213 13.4671 7.484 13.9042C7.11607 14.1644 6.66953 13.8547 6.62185 13.4519C6.53095 12.6841 6.35974 11.1243 6.17285 8.84093C6.15606 8.63593 6.05657 8.45073 5.90497 8.3374Z" stroke="currentColor" stroke-width="1.125" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <button class="filter-button" title="Colonne">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M3.33334 13.3334L3.33334 2.66675" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M8 13.3334L8 2.66675" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12.6667 13.3334L12.6667 2.66675" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <button class="export-button" (click)="exportData()" title="Esporta">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M8.00001 9.66667V3M8.00001 9.66667C7.53321 9.66667 6.66103 8.33713 6.33334 8M8.00001 9.66667C8.46681 9.66667 9.33901 8.33713 9.66668 8" stroke="currentColor" stroke-width="1.125" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M13.3333 11C13.3333 12.6547 12.988 13 11.3333 13H4.66666C3.01199 13 2.66666 12.6547 2.66666 11" stroke="currentColor" stroke-width="1.125" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Data table -->
      <div class="table-container">
        <table class="data-table">
          <thead>
            <tr class="table-header">
              <th class="header-cell">
                <span>Data rilevazione</span>
                <svg class="sort-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path d="M8.40962 13.4148C8.21057 13.6992 7.78943 13.6992 7.59038 13.4148L5.05071 9.78673C4.81874 9.45534 5.05582 9 5.46033 9H10.5397C10.9442 9 11.1813 9.45534 10.9493 9.78673L8.40962 13.4148Z" fill="#C7D2E0"/>
                  <path d="M8.40962 2.58517C8.21057 2.30081 7.78943 2.30081 7.59038 2.58517L5.05071 6.21327C4.81874 6.54466 5.05582 7 5.46033 7H10.5397C10.9442 7 11.1813 6.54466 10.9493 6.21327L8.40962 2.58517Z" fill="#051C20"/>
                </svg>
              </th>
              <th class="header-cell">
                <span>Livello</span>
                <svg class="sort-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path d="M8.40962 13.4148C8.21057 13.6992 7.78943 13.6992 7.59038 13.4148L5.05071 9.78673C4.81874 9.45534 5.05582 9 5.46033 9H10.5397C10.9442 9 11.1813 9.45534 10.9493 9.78673L8.40962 13.4148Z" fill="#C7D2E0"/>
                  <path d="M8.40962 2.58517C8.21057 2.30081 7.78943 2.30081 7.59038 2.58517L5.05071 6.21327C4.81874 6.54466 5.05582 7 5.46033 7H10.5397C10.9442 7 11.1813 6.54466 10.9493 6.21327L8.40962 2.58517Z" fill="#C7D2E0"/>
                </svg>
              </th>
              <th class="header-cell">
                <span>Origine</span>
                <svg class="sort-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path d="M8.40962 13.4148C8.21057 13.6992 7.78943 13.6992 7.59038 13.4148L5.05071 9.78673C4.81874 9.45534 5.05582 9 5.46033 9H10.5397C10.9442 9 11.1813 9.45534 10.9493 9.78673L8.40962 13.4148Z" fill="#C7D2E0"/>
                  <path d="M8.40962 2.58517C8.21057 2.30081 7.78943 2.30081 7.59038 2.58517L5.05071 6.21327C4.81874 6.54466 5.05582 7 5.46033 7H10.5397C10.9442 7 11.1813 6.54466 10.9493 6.21327L8.40962 2.58517Z" fill="#C7D2E0"/>
                </svg>
              </th>
              <th class="header-cell">
                <span>Tipologia</span>
                <svg class="sort-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path d="M8.40962 13.4148C8.21057 13.6992 7.78943 13.6992 7.59038 13.4148L5.05071 9.78673C4.81874 9.45534 5.05582 9 5.46033 9H10.5397C10.9442 9 11.1813 9.45534 10.9493 9.78673L8.40962 13.4148Z" fill="#C7D2E0"/>
                  <path d="M8.40962 2.58517C8.21057 2.30081 7.78943 2.30081 7.59038 2.58517L5.05071 6.21327C4.81874 6.54466 5.05582 7 5.46033 7H10.5397C10.9442 7 11.1813 6.54466 10.9493 6.21327L8.40962 2.58517Z" fill="#C7D2E0"/>
                </svg>
              </th>
              <th class="header-cell">
                <span>Note</span>
                <svg class="sort-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path d="M8.40962 13.4148C8.21057 13.6992 7.78943 13.6992 7.59038 13.4148L5.05071 9.78673C4.81874 9.45534 5.05582 9 5.46033 9H10.5397C10.9442 9 11.1813 9.45534 10.9493 9.78673L8.40962 13.4148Z" fill="#C7D2E0"/>
                  <path d="M8.40962 2.58517C8.21057 2.30081 7.78943 2.30081 7.59038 2.58517L5.05071 6.21327C4.81874 6.54466 5.05582 7 5.46033 7H10.5397C10.9442 7 11.1813 6.54466 10.9493 6.21327L8.40962 2.58517Z" fill="#C7D2E0"/>
                </svg>
              </th>
              <th class="header-cell">
                <span>Stato</span>
                <svg class="sort-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path d="M8.40962 13.4148C8.21057 13.6992 7.78943 13.6992 7.59038 13.4148L5.05071 9.78673C4.81874 9.45534 5.05582 9 5.46033 9H10.5397C10.9442 9 11.1813 9.45534 10.9493 9.78673L8.40962 13.4148Z" fill="#C7D2E0"/>
                  <path d="M8.40962 2.58517C8.21057 2.30081 7.78943 2.30081 7.59038 2.58517L5.05071 6.21327C4.81874 6.54466 5.05582 7 5.46033 7H10.5397C10.9442 7 11.1813 6.54466 10.9493 6.21327L8.40962 2.58517Z" fill="#C7D2E0"/>
                </svg>
              </th>
              <th class="header-cell">
                <span>Sensore</span>
                <svg class="sort-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path d="M8.40962 13.4148C8.21057 13.6992 7.78943 13.6992 7.59038 13.4148L5.05071 9.78673C4.81874 9.45534 5.05582 9 5.46033 9H10.5397C10.9442 9 11.1813 9.45534 10.9493 9.78673L8.40962 13.4148Z" fill="#C7D2E0"/>
                  <path d="M8.40962 2.58517C8.21057 2.30081 7.78943 2.30081 7.59038 2.58517L5.05071 6.21327C4.81874 6.54466 5.05582 7 5.46033 7H10.5397C10.9442 7 11.1813 6.54466 10.9493 6.21327L8.40962 2.58517Z" fill="#C7D2E0"/>
                </svg>
              </th>
              <th class="header-cell actions-column"></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let anomalia of paginatedAnomalies; trackBy: trackByFn" class="table-row">
              <td class="table-cell">
                <div class="cell-content">
                  <div class="cell-primary">{{ anomalia.dataRilevazione | date:'d MMMM y':'it' }}</div>
                  <div class="cell-secondary">{{ anomalia.ora }}</div>
                </div>
              </td>
              <td class="table-cell">
                <div class="badge level-badge" [ngClass]="getLevelClass(anomalia.livello)">
                  <div class="badge-icon">
                    <svg *ngIf="anomalia.livello === 'Alto'" width="11" height="10" viewBox="0 0 11 10" fill="none">
                      <path d="M4.30934 5.28067H4.11811C3.49989 5.28067 3.19078 5.28067 3.05902 5.07683C2.92726 4.87304 3.0528 4.58908 3.30388 4.02118L4.05873 2.31385C4.28702 1.7975 4.40117 1.53932 4.6226 1.39466C4.84404 1.25 5.12508 1.25 5.6872 1.25H6.55778C7.24062 1.25 7.58203 1.25 7.71078 1.47306C7.83958 1.69613 7.6702 1.99412 7.33141 2.5901L6.88478 3.37578C6.71637 3.67206 6.63216 3.8202 6.63333 3.94147C6.63487 4.09906 6.71866 4.24425 6.85403 4.32375C6.9582 4.38496 7.12791 4.38496 7.46737 4.38496C7.89649 4.38496 8.11108 4.38496 8.22283 4.45925C8.36799 4.55575 8.44399 4.72842 8.41737 4.90133C8.39687 5.03442 8.25253 5.194 7.96387 5.51321L5.65758 8.06346C5.20458 8.56438 4.97808 8.81483 4.82598 8.73558C4.67388 8.65629 4.74692 8.32592 4.89299 7.66508L5.17916 6.37067C5.29037 5.8675 5.34599 5.61592 5.21224 5.44829C5.07849 5.28067 4.8221 5.28067 4.30934 5.28067Z" stroke="currentColor" stroke-width="0.75" stroke-linejoin="round"/>
                    </svg>
                    <svg *ngIf="anomalia.livello === 'Basso'" width="11" height="10" viewBox="0 0 11 10" fill="none">
                      <path d="M3.90005 6.54617C3.72795 6.20692 3.63095 5.82312 3.63095 5.41667C3.63095 4.07702 4.67262 3.125 6.13095 2.91667C7.83166 2.67371 8.56149 1.73611 9.04762 1.25C10.506 6.66667 7.79762 7.91667 6.13095 7.91667C5.67558 7.91667 5.24866 7.79492 4.88095 7.58221" stroke="currentColor" stroke-width="0.75" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M1.96429 8.74991C2.17262 7.49991 2.98842 6.72304 4.88095 6.24991C6.22125 5.91483 7.15737 5.07454 7.79762 4.18945" stroke="currentColor" stroke-width="0.75" stroke-linecap="round"/>
                    </svg>
                    <svg *ngIf="anomalia.livello === 'Critico'" width="11" height="10" viewBox="0 0 11 10" fill="none">
                      <path d="M5.71428 8.95861C7.55524 8.95861 9.04762 7.46624 9.04762 5.62528C9.04762 4.39149 8.37728 2.7528 7.38095 1.80611L6.54762 2.91626L5.08928 1.04126C3.63095 2.08293 2.38095 3.99797 2.38095 5.62528C2.38095 7.46624 3.87333 8.95861 5.71428 8.95861Z" stroke="currentColor" stroke-width="0.75" stroke-linejoin="round"/>
                      <path d="M5.71429 7.70793C6.63475 7.70793 7.38096 6.86847 7.38096 5.83293C7.38096 5.50335 7.30537 5.19364 7.17262 4.92452L6.33929 5.6246L5.08929 3.95752C4.67262 4.37418 4.04762 5.04606 4.04762 5.83293C4.04762 6.86847 4.79381 7.70793 5.71429 7.70793Z" stroke="currentColor" stroke-width="0.75" stroke-linejoin="round"/>
                    </svg>
                  </div>
                  <span>{{ anomalia.livello }}</span>
                </div>
              </td>
              <td class="table-cell">
                <div class="badge origin-badge" [ngClass]="getOriginClass(anomalia.origine)">
                  <div class="badge-icon">
                    <svg *ngIf="anomalia.origine === 'Impianto'" width="13" height="12" viewBox="0 0 13 12" fill="none">
                      <path d="M7.42857 4H5.42857C4.18757 4 3.92857 4.259 3.92857 5.5V11H8.92857V5.5C8.92857 4.259 8.66957 4 7.42857 4Z" stroke="currentColor" stroke-width="0.75" stroke-linejoin="round"/>
                      <path d="M5.92857 6H6.92857M5.92857 7.5H6.92857M5.92857 9H6.92857" stroke="currentColor" stroke-width="0.75" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M10.9286 11V4.09282C10.9286 3.47868 10.9286 3.1716 10.7792 2.92483C10.6299 2.67806 10.3609 2.54074 9.82302 2.26608L7.65217 1.15768C7.07197 0.861421 6.92857 0.965831 6.92857 1.61437V3.85175" stroke="currentColor" stroke-width="0.75" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M1.92857 11V6.5C1.92857 6.08635 2.01491 6 2.42857 6H3.92857" stroke="currentColor" stroke-width="0.75" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M11.4286 11H1.42857" stroke="currentColor" stroke-width="0.75" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <svg *ngIf="anomalia.origine === 'Utenza'" width="13" height="12" viewBox="0 0 13 12" fill="none">
                      <path d="M8.42857 3.5C8.42857 4.60457 7.53312 5.5 6.42857 5.5C5.324 5.5 4.42857 4.60457 4.42857 3.5C4.42857 2.39543 5.324 1.5 6.42857 1.5C7.53312 1.5 8.42857 2.39543 8.42857 3.5Z" stroke="currentColor" stroke-width="0.75"/>
                      <path d="M7.42857 7H5.42857C4.04786 7 2.92857 8.1193 2.92857 9.5C2.92857 10.0523 3.37629 10.5 3.92857 10.5H8.92857C9.48087 10.5 9.92857 10.0523 9.92857 9.5C9.92857 8.1193 8.80927 7 7.42857 7Z" stroke="currentColor" stroke-width="0.75" stroke-linejoin="round"/>
                    </svg>
                  </div>
                  <span>{{ anomalia.origine }}</span>
                </div>
              </td>
              <td class="table-cell">
                <div class="badge tipologia-badge" [ngClass]="getTipologiaClass(anomalia.tipologia)">
                  <div class="badge-icon">
                    <svg *ngIf="anomalia.tipologia === 'Manuale'" width="13" height="12" viewBox="0 0 13 12" fill="none">
                      <path d="M5.44535 4.51388L3.24414 2.30803C2.94788 2.01114 2.95055 1.52711 3.25011 1.22691C3.54968 0.926716 4.03269 0.924036 4.32896 1.22093L8.22175 5.08355C9.5509 6.4155 10.3171 8.16145 8.8334 9.96565L8.67515 10.1243C7.50995 11.2919 5.62075 11.2919 4.45552 10.1243L2.86115 8.5493C2.56489 8.2524 2.57094 7.765 2.87467 7.46065C3.1626 7.1721 3.61467 7.15165 3.91332 7.4032M5.44535 4.51388L6.6999 5.77105M5.44535 4.51388C5.1491 4.21699 4.64995 4.22391 4.34489 4.52961C4.03982 4.83531 4.0327 5.3238 4.32896 5.6207L4.69289 5.9854M3.91332 7.4032L3.6007 7.09915C3.30444 6.80225 3.31156 6.31375 3.61663 6.00805C3.92169 5.70235 4.39662 5.6885 4.69289 5.9854M3.91332 7.4032L4.47851 7.95285M3.91332 7.4032C3.92972 7.417 3.94565 7.43165 3.96107 7.4471M4.69289 5.9854L5.58475 6.87915M6.2109 3.08831C6.2946 2.31989 7.20465 1.52333 8.341 2.06921C8.4489 2.12105 8.5344 2.21912 8.5354 2.33903C8.53695 2.5322 8.45215 2.77068 8.18035 2.92881C7.79155 3.15502 7.15465 4.01931 8.00485 4.8713" stroke="currentColor" stroke-width="0.75" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <svg *ngIf="anomalia.tipologia === 'Algoritmo'" width="13" height="12" viewBox="0 0 13 12" fill="none">
                      <path d="M5.39285 1V2M6.89285 1V2M4.14285 3.25H3.14285M4.14285 4.75H3.14285M9.14285 3.25H8.14285M9.14285 4.75H8.14285M6.8095 2H5.4762C4.84765 2 4.53338 2 4.33811 2.19526C4.14285 2.39053 4.14285 2.70479 4.14285 3.33333V4.66667C4.14285 5.2952 4.14285 5.6095 4.33811 5.80475C4.53338 6 4.84765 6 5.4762 6H6.8095C7.43805 6 7.75235 6 7.9476 5.80475C8.14285 5.6095 8.14285 5.2952 8.14285 4.66667V3.33333C8.14285 2.70479 8.14285 2.39053 7.9476 2.19526C7.75235 2 7.43805 2 6.8095 2Z" stroke="currentColor" stroke-width="0.75" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M1.95151 10.962C2.0434 11 2.15988 11 2.39285 11C2.62582 11 2.74231 11 2.83419 10.962C2.95671 10.9112 3.05405 10.8138 3.10479 10.6913C3.14285 10.5994 3.14285 10.483 3.14285 10.25C3.14285 10.017 3.14285 9.90055 3.10479 9.80865C3.05405 9.68615 2.95671 9.5888 2.83419 9.53805C2.74231 9.5 2.62582 9.5 2.39285 9.5C2.15988 9.5 2.0434 9.5 1.95151 9.53805C1.829 9.5888 1.73166 9.68615 1.68091 9.80865C1.64285 9.90055 1.64285 10.017 1.64285 10.25C1.64285 10.483 1.64285 10.5994 1.68091 10.6913C1.73166 10.8138 1.829 10.9112 1.95151 10.962Z" stroke="currentColor" stroke-width="0.75" stroke-linejoin="round"/>
                      <path d="M5.7015 10.962C5.7934 11 5.9099 11 6.14285 11C6.3758 11 6.4923 11 6.5842 10.962C6.7067 10.9112 6.80405 10.8138 6.8548 10.6913C6.89285 10.5994 6.89285 10.483 6.89285 10.25C6.89285 10.017 6.89285 9.90055 6.8548 9.80865C6.80405 9.68615 6.7067 9.5888 6.5842 9.53805C6.4923 9.5 6.3758 9.5 6.14285 9.5C5.9099 9.5 5.7934 9.5 5.7015 9.53805C5.579 9.5888 5.48165 9.68615 5.4309 9.80865C5.39285 9.90055 5.39285 10.017 5.39285 10.25C5.39285 10.483 5.39285 10.5994 5.4309 10.6913C5.48165 10.8138 5.579 10.9112 5.7015 10.962Z" stroke="currentColor" stroke-width="0.75" stroke-linejoin="round"/>
                      <path d="M6.14285 9.5V6" stroke="currentColor" stroke-width="0.75" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M2.39285 9.5C2.39285 8.79775 2.39285 8.44665 2.56138 8.19445C2.63434 8.08525 2.72809 7.9915 2.83728 7.91855C3.08951 7.75 3.44062 7.75 4.14285 7.75H8.14285C8.8451 7.75 9.1962 7.75 9.4484 7.91855C9.5576 7.9915 9.65135 8.08525 9.7243 8.19445C9.89285 8.44665 9.89285 8.79775 9.89285 9.5" stroke="currentColor" stroke-width="0.75" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M9.4515 10.962C9.5434 11 9.6599 11 9.89285 11C10.1258 11 10.2423 11 10.3342 10.962C10.4567 10.9112 10.5541 10.8138 10.6048 10.6913C10.6429 10.5994 10.6429 10.483 10.6429 10.25C10.6429 10.017 10.6429 9.90055 10.6048 9.80865C10.5541 9.68615 10.4567 9.5888 10.3342 9.53805C10.2423 9.5 10.1258 9.5 9.89285 9.5C9.6599 9.5 9.5434 9.5 9.4515 9.53805C9.329 9.5888 9.23165 9.68615 9.1809 9.80865C9.14285 9.90055 9.14285 10.017 9.14285 10.25C9.14285 10.483 9.14285 10.5994 9.1809 10.6913C9.23165 10.8138 9.329 10.9112 9.4515 10.962Z" stroke="currentColor" stroke-width="0.75" stroke-linejoin="round"/>
                    </svg>
                  </div>
                  <span>{{ anomalia.tipologia }}</span>
                </div>
              </td>
              <td class="table-cell">
                <!-- Empty for notes column -->
              </td>
              <td class="table-cell">
                <div class="badge status-badge status-attivo">
                  <div class="badge-icon">
                    <svg width="13" height="12" viewBox="0 0 13 12" fill="none">
                      <path d="M3.23224 4.84146C4.43908 2.70599 5.04249 1.63825 5.87053 1.3634C6.32603 1.2122 6.81673 1.2122 7.27223 1.3634C8.10028 1.63825 8.70368 2.70599 9.91053 4.84146C11.1174 6.97691 11.7208 8.04466 11.5398 8.91466C11.4402 9.39331 11.1948 9.82741 10.8389 10.1549C10.1919 10.75 8.98508 10.75 6.57138 10.75C4.15771 10.75 2.95087 10.75 2.30386 10.1549C1.94792 9.82741 1.70258 9.39331 1.60299 8.91466C1.42198 8.04466 2.0254 6.97691 3.23224 4.84146Z" stroke="currentColor" stroke-width="0.75"/>
                      <path d="M6.56738 8H6.57188" stroke="currentColor" stroke-width="0.75" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M6.57138 6.50001V4.5" stroke="currentColor" stroke-width="0.75" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </div>
                  <span>Attivo</span>
                </div>
              </td>
              <td class="table-cell">
                <div class="cell-content">
                  <div class="cell-primary">{{ anomalia.sensore }}</div>
                  <div class="cell-secondary">{{ anomalia.codice }}</div>
                </div>
              </td>
              <td class="table-cell actions-cell">
                <div class="action-buttons">
                  <button class="action-button" (click)="editAnomalia(anomalia)" title="Modifica">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                      <path d="M16.4248 4.60509L17.4148 3.6151C18.235 2.79497 19.5647 2.79497 20.3848 3.6151C21.2049 4.43524 21.2049 5.76493 20.3848 6.58507L19.3948 7.57506M16.4248 4.60509L9.76552 11.2644C9.25801 11.772 8.89798 12.4078 8.72391 13.1041L7.99994 16L10.8958 15.276C11.5921 15.102 12.2279 14.7419 12.7355 14.2344L19.3948 7.57506M16.4248 4.60509L19.3948 7.57506" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
                      <path d="M18.9998 13.5C18.9998 16.7875 18.9998 18.4312 18.0919 19.5376C17.9257 19.7401 17.74 19.9258 17.5374 20.092C16.4311 21 14.7873 21 11.4998 21H10.9999C7.2287 21 5.3431 21 4.17153 19.8284C2.99997 18.6569 2.99994 16.7712 2.99994 13V12.5C2.99994 9.21252 2.99994 7.56879 3.90788 6.46244C4.07411 6.2599 4.25984 6.07417 4.46238 5.90794C5.56873 5 7.21246 5 10.4999 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </button>
                  <button class="action-button" (click)="viewDetails(anomalia)" title="Dettagli">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                      <path d="M11.099 3C7.45007 3.00657 5.53925 3.09617 4.3181 4.31752C3.00027 5.63556 3.00027 7.75692 3.00027 11.9996C3.00027 16.2423 3.00027 18.3637 4.3181 19.6817C5.63592 20.9998 7.75694 20.9998 11.999 20.9998C16.2409 20.9998 18.362 20.9998 19.6798 19.6817C20.9009 18.4604 20.9905 16.5492 20.9971 12.8997" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M20.5559 3.49624L11.0486 13.0587M20.5559 3.49624C20.0619 3.00163 16.7342 3.04773 16.0307 3.05774M20.5559 3.49624C21.0499 3.99086 21.0038 7.32285 20.9938 8.02726" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Pagination -->
      <div class="pagination-container">
        <div class="pagination-info">
          {{ (currentPage - 1) * itemsPerPage + 1 }}-{{ Math.min(currentPage * itemsPerPage, filteredAnomalies.length) }} di {{ filteredAnomalies.length }}
        </div>
        <div class="pagination-controls">
          <span class="pagination-label">Righe per pagina:</span>
          <select class="rows-select" [value]="itemsPerPage" (change)="changeItemsPerPage(+$event.target.value)">
            <option value="10">10</option>
            <option value="25">25</option>
            <option value="50">50</option>
          </select>
        </div>
        <div class="pagination-navigation">
          <button 
            class="nav-button" 
            [disabled]="currentPage === 1"
            (click)="changePage('prev')"
            title="Pagina precedente">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
              <path d="M8.75 3.5C8.75 3.5 5.25001 6.07769 5.25 7C5.24999 7.92237 8.75 10.5 8.75 10.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <span class="page-info">
            <span class="current-page">{{ currentPage }}</span>
            <span class="total-pages">/{{ totalPages }}</span>
          </span>
          <button 
            class="nav-button" 
            [disabled]="currentPage === totalPages"
            (click)="changePage('next')"
            title="Pagina successiva">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
              <path d="M5.25003 3.5C5.25003 3.5 8.75 6.07769 8.75 7C8.75 7.92237 5.25 10.5 5.25 10.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
